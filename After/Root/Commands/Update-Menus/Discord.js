const Discord=require('discord.js'),fs=require('fs'),Updater=require('./Updater.js'),updateConfig=Updater['updateFile'],getEmbedFile=require('../Functions/GetEmbed.js'),getEmbed=getEmbedFile['getSettingsEmbed'],getMenu=getEmbedFile['getSettingsMenu'],CancelFile=require('../Buttons/CancelSettingUpdate.js'),Cancel=CancelFile['cancel'];async function resetEmbed(_0x33044c,_0x1ecddb){await getEmbed(_0x33044c['user']['tag'],async function(){await getMenu('Discord',async function(){if(_0x1ecddb['first']())_0x1ecddb['first']()['delete']();_0x33044c['message']['edit']({'embeds':[getEmbedFile['Embeds']['DiscordEmbed']],'components':[getEmbedFile['Menus']['SettingsMenu'],getEmbedFile['Buttons']['UpdateCategory']]});});});}async function followUP(_0x1dca47,_0x4b0652){_0x1dca47['followUp']({'content':_0x4b0652,'ephemeral':![]})['then'](_0x27681f=>{setTimeout(function(){_0x27681f['delete']();},0xbb8);});}module['exports']={'name':'Discord-Update','run':async(_0x3c749d,_0x18ab47,_0x5449c9)=>{fs['readFile']('./Settings.json','utf8',function(_0x2b3e0c,_0x5a4cff){var _0x1f7816=JSON['parse'](_0x5a4cff);if(_0x18ab47['user']['tag']!==_0x18ab47['message']['embeds'][0x0]['footer']['text'])return _0x18ab47['reply']({'content':'Please\x20use\x20`.settings`\x20to\x20do\x20this.','ephemeral':!![]});let _0x2e3be2,_0x2d50d4=null;switch(_0x18ab47['values'][0x0]){case'Embed\x20Color':_0x2e3be2=['String'],_0x2d50d4=_0x1f7816['embedColor'];break;case'Permissions\x20Role':_0x2e3be2=['String'],_0x2d50d4=_0x1f7816['permissionRole'];break;case'Ingame\x20Chat\x20Logging':_0x2e3be2=['True','False'],_0x2d50d4=_0x1f7816['ingameChat'];break;case'Ingame\x20Chat\x20Logging\x20Channel':_0x2e3be2=['String'],_0x2d50d4=_0x1f7816['ingameChatChannel'];break;case'Error\x20Logging':_0x2e3be2=['True','False'],_0x2d50d4=_0x1f7816['errorLogging'];break;case'Error\x20Logging\x20Channel':_0x2e3be2=['String'],_0x2d50d4=_0x1f7816['errorLoggingChannel'];break;default:return console['log']('Error\x20updating\x20settings.');}let _0x38f74b=_0x18ab47['message']['embeds'][0x0];_0x38f74b['setDescription']('What\x20should\x20**'+_0x18ab47['values'][0x0]+'**\x20be\x20changed\x20to?\x20It\x27s\x20currently\x20set\x20to:\x20`'+_0x2d50d4+'`\x0a*Allowed\x20imputs:\x20`'+_0x2e3be2['toString']()['replace'](/[|]/gi,'\x20')['replace'](/,/gi,',\x20')+'`*');const _0x2da12d=_0x372109=>_0x372109['author']['id']===_0x18ab47['user']['id'];_0x18ab47['update']({'embeds':[_0x38f74b],'components':[_0x18ab47['message']['components'][0x1]]},{'fecthReply':!![]})['then'](async()=>{_0x18ab47['channel']['awaitMessages']({'filter':_0x2da12d,'max':0x1,'time':0x7530,'errors':['time']})['then'](async _0x45b1e5=>{if(Cancel[0x0]){if(Cancel[0x0]['userID']==_0x18ab47['user']['id']){if(Math['floor'](Date['now']()-Cancel[0x0]['time']/0x3e8)>0x1e)return Cancel['splice'](0x0);else Cancel['splice'](0x0);}}let _0x2aee5b=_0x45b1e5['first']()['content'],_0x5dfa0e=![];if(_0x2e3be2[0x0]['toLowerCase']()!='number'){if(_0x2e3be2[0x0]['toLowerCase']()!='string'){_0x2e3be2['forEach'](_0x18a5a5=>{_0x18a5a5['toLowerCase']()==_0x2aee5b['toLowerCase']()&&(_0x5dfa0e=!![]);});if(!_0x5dfa0e)return resetEmbed(_0x18ab47,_0x45b1e5),followUP(_0x18ab47,'Invalid\x20imput.');if(_0x2aee5b['toLowerCase']()=='true'||_0x2aee5b['toLowerCase']()=='false')_0x2aee5b=_0x2aee5b==='true';}}else{if(isNaN(_0x2aee5b))return resetEmbed(_0x18ab47,_0x45b1e5),followUP(_0x18ab47,'Invalid\x20imput\x20-\x20Please\x20enter\x20a\x20number.');_0x2aee5b=parseInt(_0x2aee5b);}try{updateConfig(_0x18ab47['values'][0x0],_0x2aee5b,function(){return resetEmbed(_0x18ab47,_0x45b1e5),followUP(_0x18ab47,'Successfully\x20updated\x20`'+_0x18ab47['values'][0x0]+'`\x20to:\x20**'+_0x45b1e5['first']()['content']+'**');});}catch(_0x4c1b06){return console['log'](_0x4c1b06);}})['catch'](_0x36f82d=>{return resetEmbed(_0x18ab47,_0x36f82d),followUP(_0x18ab47,'Timed\x20out.');});});});}};