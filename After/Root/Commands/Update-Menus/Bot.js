const Discord=require('discord.js'),fs=require('fs'),Updater=require('./Updater.js'),updateConfig=Updater['updateFile'],getEmbedFile=require('../Functions/GetEmbed.js'),getEmbed=getEmbedFile['getSettingsEmbed'],getMenu=getEmbedFile['getSettingsMenu'],CancelFile=require('../Buttons/CancelSettingUpdate.js'),Cancel=CancelFile['cancel'];async function resetEmbed(_0x542e71,_0x258754){await getEmbed(_0x542e71['user']['tag'],async function(){await getMenu('Bot',async function(){if(_0x258754['first']())_0x258754['first']()['delete']();_0x542e71['message']['edit']({'embeds':[getEmbedFile['Embeds']['BotEmbed']],'components':[getEmbedFile['Menus']['SettingsMenu'],getEmbedFile['Buttons']['UpdateCategory']]});});});}async function followUP(_0x4c2f06,_0x497be9){_0x4c2f06['followUp']({'content':_0x497be9,'ephemeral':![]})['then'](_0x9c07a1=>{setTimeout(function(){_0x9c07a1['delete']();},0xbb8);});}module['exports']={'name':'Bot-Update','run':async(_0x416753,_0x1c5ad8,_0x13dd71)=>{fs['readFile']('./Settings.json','utf8',async function(_0x47cff0,_0x3d2886){var _0x3fd081=JSON['parse'](_0x3d2886);if(_0x1c5ad8['user']['tag']!==_0x1c5ad8['message']['embeds'][0x0]['footer']['text'])return _0x1c5ad8['reply']({'content':'Please\x20use\x20`.settings`\x20to\x20do\x20this.','ephemeral':!![]});let _0x113115,_0x38c422=null;switch(_0x1c5ad8['values'][0x0]){case'Render\x20Distance':_0x113115=['Far','Normal','Short','Tiny'],_0x38c422=_0x3fd081['renderDistance'];break;case'Auto\x20Select\x20Bots':_0x113115=['True','False'],_0x38c422=_0x3fd081['autoSelect'];break;case'Auto\x20Eat':_0x113115=['True','False'],_0x38c422=_0x3fd081['autoEat'];break;case'Follow\x20Speed':_0x113115=['Number'],_0x38c422=_0x3fd081['followSpeed'];break;default:return console['log']('Error\x20updating\x20settings.');}let _0x2de493=_0x1c5ad8['message']['embeds'][0x0];_0x2de493['setDescription']('What\x20should\x20**'+_0x1c5ad8['values'][0x0]+'**\x20be\x20changed\x20to?\x20It\x27s\x20currently\x20set\x20to:\x20`'+_0x38c422+'`\x0a*Allowed\x20imputs:\x20`'+_0x113115['toString']()['replace'](/[|]/gi,'\x20')['replace'](/,/gi,',\x20')+'`*');const _0x13073f=_0x284aa3=>_0x284aa3['author']['id']===_0x1c5ad8['user']['id'];_0x1c5ad8['update']({'embeds':[_0x2de493],'components':[_0x1c5ad8['message']['components'][0x1]]},{'fecthReply':!![]})['then'](async()=>{_0x1c5ad8['channel']['awaitMessages']({'filter':_0x13073f,'max':0x1,'time':0x7530,'errors':['time']})['then'](async _0x2cf114=>{if(Cancel[0x0]){if(Cancel[0x0]['userID']==_0x1c5ad8['user']['id']){if(Math['floor'](Date['now']()-Cancel[0x0]['time']/0x3e8)>0x1e)return Cancel['splice'](0x0);else Cancel['splice'](0x0);}}let _0x10af0e=_0x2cf114['first']()['content'],_0x423b3f=![];if(_0x113115[0x0]['toLowerCase']()!='number'){if(_0x113115[0x0]['toLowerCase']()!='string'){_0x113115['forEach'](_0x2bdc42=>{_0x2bdc42['toLowerCase']()==_0x10af0e['toLowerCase']()&&(_0x423b3f=!![]);});if(!_0x423b3f)return resetEmbed(_0x1c5ad8,_0x2cf114),followUP(_0x1c5ad8,'Invalid\x20imput.');if(_0x10af0e['toLowerCase']()=='true'||_0x10af0e['toLowerCase']()=='false')_0x10af0e=_0x10af0e==='true';}}else{if(isNaN(_0x10af0e))return resetEmbed(_0x1c5ad8,_0x2cf114),followUP(_0x1c5ad8,'Invalid\x20imput\x20-\x20Please\x20enter\x20a\x20number.');_0x10af0e=parseInt(_0x10af0e);}try{updateConfig(_0x1c5ad8['values'][0x0],_0x10af0e,function(){return resetEmbed(_0x1c5ad8,_0x2cf114),followUP(_0x1c5ad8,'Successfully\x20updated\x20`'+_0x1c5ad8['values'][0x0]+'`\x20to:\x20**'+_0x2cf114['first']()['content']+'**');});}catch(_0x54b481){return console['log'](_0x54b481);}})['catch'](_0x495a12=>{return resetEmbed(_0x1c5ad8,_0x495a12),followUP(_0x1c5ad8,'Timed\x20out.');});});});}};