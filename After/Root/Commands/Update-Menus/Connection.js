const Discord=require('discord.js'),fs=require('fs'),Updater=require('./Updater.js'),updateConfig=Updater['updateFile'],getEmbedFile=require('../Functions/GetEmbed.js'),getEmbed=getEmbedFile['getSettingsEmbed'],getMenu=getEmbedFile['getSettingsMenu'],CancelFile=require('../Buttons/CancelSettingUpdate.js'),Cancel=CancelFile['cancel'];async function resetEmbed(_0x56d170,_0x35f9e6){await getEmbed(_0x56d170['user']['tag'],async function(){await getMenu('Connection',async function(){if(_0x35f9e6['first']())_0x35f9e6['first']()['delete']();_0x56d170['message']['edit']({'embeds':[getEmbedFile['Embeds']['ConnectionEmbed']],'components':[getEmbedFile['Menus']['SettingsMenu'],getEmbedFile['Buttons']['UpdateCategory']]});});});}async function followUP(_0x395a51,_0x44ce56){_0x395a51['followUp']({'content':_0x44ce56,'ephemeral':![]})['then'](_0x4bbd38=>{setTimeout(function(){_0x4bbd38['delete']();},0xbb8);});}module['exports']={'name':'Connection-Update','run':async(_0x5d4a61,_0x54959c,_0xd12e3d)=>{fs['readFile']('./Settings.json','utf8',function(_0x482d4d,_0x5188ef){var _0x297d93=JSON['parse'](_0x5188ef);if(_0x54959c['user']['tag']!==_0x54959c['message']['embeds'][0x0]['footer']['text'])return _0x54959c['reply']({'content':'Please\x20use\x20`.settings`\x20to\x20do\x20this.','ephemeral':!![]});let _0x6b0b79,_0x6916c3=null;switch(_0x54959c['values'][0x0]){case'Server\x20IP':_0x6b0b79=['String'],_0x6916c3=_0x297d93['serverIP'];break;case'Port':_0x6b0b79=['Number'],_0x6916c3=_0x297d93['port'];break;case'Version':_0x6b0b79=['Number'],_0x6916c3=_0x297d93['version'];break;case'Join\x20Command':_0x6b0b79=['String'],_0x6916c3=_0x297d93['joinCommand'];break;case'Join\x20Speed':_0x6b0b79=['Number'],_0x6916c3=_0x297d93['joinSpeed'];break;case'Max\x20Accounts':_0x6b0b79=['Number'],_0x6916c3=_0x297d93['maxAccounts'];break;case'Throttling\x20Delay':_0x6b0b79=['Number'],_0x6916c3=_0x297d93['throttlingDelay'];break;default:return console['log']('Error\x20updating\x20settings.');}let _0x643cbf=_0x54959c['message']['embeds'][0x0];_0x643cbf['setDescription']('What\x20should\x20**'+_0x54959c['values'][0x0]+'**\x20be\x20changed\x20to?\x20It\x27s\x20currently\x20set\x20to:\x20`'+_0x6916c3+'`\x0a*Allowed\x20imputs:\x20`'+_0x6b0b79['toString']()['replace'](/[|]/gi,'\x20')['replace'](/,/gi,',\x20')+'`*');const _0x4bfd3a=_0x49295e=>_0x49295e['author']['id']===_0x54959c['user']['id'];_0x54959c['update']({'embeds':[_0x643cbf],'components':[_0x54959c['message']['components'][0x1]]},{'fecthReply':!![]})['then'](async()=>{_0x54959c['channel']['awaitMessages']({'filter':_0x4bfd3a,'max':0x1,'time':0x7530,'errors':['time']})['then'](async _0xf079a9=>{if(Cancel[0x0]){if(Cancel[0x0]['userID']==_0x54959c['user']['id']){if(Math['floor'](Date['now']()-Cancel[0x0]['time']/0x3e8)>0x1e)return Cancel['splice'](0x0);else Cancel['splice'](0x0);}}let _0x39cf5d=_0xf079a9['first']()['content'],_0x219741=![];if(_0x6b0b79[0x0]['toLowerCase']()!='number'){if(_0x6b0b79[0x0]['toLowerCase']()!='string'){_0x6b0b79['forEach'](_0x5092b1=>{_0x5092b1['toLowerCase']()==_0x39cf5d['toLowerCase']()&&(_0x219741=!![]);});if(!_0x219741)return resetEmbed(_0x54959c,_0xf079a9),followUP(_0x54959c,'Invalid\x20imput.');if(_0x39cf5d['toLowerCase']()=='true'||_0x39cf5d['toLowerCase']()=='false')_0x39cf5d=_0x39cf5d==='true';}}else{if(isNaN(_0x39cf5d))return resetEmbed(_0x54959c,_0xf079a9),followUP(_0x54959c,'Invalid\x20imput\x20-\x20Please\x20enter\x20a\x20number.');_0x39cf5d=parseInt(_0x39cf5d);}try{updateConfig(_0x54959c['values'][0x0],_0x39cf5d,function(){return resetEmbed(_0x54959c,_0xf079a9),followUP(_0x54959c,'Successfully\x20updated\x20`'+_0x54959c['values'][0x0]+'`\x20to:\x20**'+_0xf079a9['first']()['content']+'**');});}catch(_0x18072e){return console['log'](_0x18072e);}})['catch'](_0x39c07a=>{return resetEmbed(_0x54959c,_0x39c07a),followUP(_0x54959c,'Timed\x20out.');});});});}};