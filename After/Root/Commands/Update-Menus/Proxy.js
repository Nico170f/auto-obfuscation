const Discord=require('discord.js'),fs=require('fs'),Updater=require('./Updater.js'),updateConfig=Updater['updateFile'],getEmbedFile=require('../Functions/GetEmbed.js'),getEmbed=getEmbedFile['getSettingsEmbed'],getMenu=getEmbedFile['getSettingsMenu'],CancelFile=require('../Buttons/CancelSettingUpdate.js'),Cancel=CancelFile['cancel'];async function resetEmbed(_0x46e877,_0xbd3f1c){await getEmbed(_0x46e877['user']['tag'],async function(){await getMenu('Proxies',async function(){if(_0xbd3f1c['first']())_0xbd3f1c['first']()['delete']();_0x46e877['message']['edit']({'embeds':[getEmbedFile['Embeds']['ProxiesEmbed']],'components':[getEmbedFile['Menus']['SettingsMenu'],getEmbedFile['Buttons']['UpdateCategory']]});});});}async function followUP(_0x15be6c,_0x8789a9){_0x15be6c['followUp']({'content':_0x8789a9,'ephemeral':![]})['then'](_0x200574=>{setTimeout(function(){_0x200574['delete']();},0xbb8);});}module['exports']={'name':'Proxy-Update','run':async(_0x14c887,_0x333ba8,_0x574b54)=>{fs['readFile']('./Settings.json','utf8',function(_0x4c9772,_0x2792ad){var _0x782342=JSON['parse'](_0x2792ad);if(_0x333ba8['user']['tag']!==_0x333ba8['message']['embeds'][0x0]['footer']['text'])return _0x333ba8['reply']({'content':'Please\x20use\x20`.settings`\x20to\x20do\x20this.','ephemeral':!![]});let _0x3f9270,_0x3cbebc=null;switch(_0x333ba8['values'][0x0]){case'Use\x20Proxies':_0x3f9270=['True','False'],_0x3cbebc=_0x782342['useProxies'];break;case'Randomize\x20Order':_0x3f9270=['True','False'],_0x3cbebc=_0x782342['randomizeOrder'];break;case'Accounts\x20Per\x20Proxy':_0x3f9270=['Number'],_0x3cbebc=_0x782342['accountsPerProxy'];break;default:return console['log']('Error\x20updating\x20settings.');}let _0x3ba1c7=_0x333ba8['message']['embeds'][0x0];_0x3ba1c7['setDescription']('What\x20should\x20**'+_0x333ba8['values'][0x0]+'**\x20be\x20changed\x20to?\x20It\x27s\x20currently\x20set\x20to:\x20`'+_0x3cbebc+'`\x0a*Allowed\x20imputs:\x20`'+_0x3f9270['toString']()['replace'](/[|]/gi,'\x20')['replace'](/,/gi,',\x20')+'`*');const _0xfc4b37=_0x5d1067=>_0x5d1067['author']['id']===_0x333ba8['user']['id'];_0x333ba8['update']({'embeds':[_0x3ba1c7],'components':[_0x333ba8['message']['components'][0x1]]},{'fecthReply':!![]})['then'](async()=>{_0x333ba8['channel']['awaitMessages']({'filter':_0xfc4b37,'max':0x1,'time':0x7530,'errors':['time']})['then'](async _0x3f3abc=>{if(Cancel[0x0]){if(Cancel[0x0]['userID']==_0x333ba8['user']['id']){if(Math['floor'](Date['now']()-Cancel[0x0]['time']/0x3e8)>0x1e)return Cancel['splice'](0x0);else Cancel['splice'](0x0);}}let _0x3ffca3=_0x3f3abc['first']()['content'],_0xf9a4d7=![];if(_0x3f9270[0x0]['toLowerCase']()!='number'){if(_0x3f9270[0x0]['toLowerCase']()!='string'){_0x3f9270['forEach'](_0x1dba17=>{_0x1dba17['toLowerCase']()==_0x3ffca3['toLowerCase']()&&(_0xf9a4d7=!![]);});if(!_0xf9a4d7)return resetEmbed(_0x333ba8,_0x3f3abc),followUP(_0x333ba8,'Invalid\x20imput.');if(_0x3ffca3['toLowerCase']()=='true'||_0x3ffca3['toLowerCase']()=='false')_0x3ffca3=_0x3ffca3==='true';}}else{if(isNaN(_0x3ffca3))return resetEmbed(_0x333ba8,_0x3f3abc),followUP(_0x333ba8,'Invalid\x20imput\x20-\x20Please\x20enter\x20a\x20number.');_0x3ffca3=parseInt(_0x3ffca3);}try{updateConfig(_0x333ba8['values'][0x0],_0x3ffca3,function(){return resetEmbed(_0x333ba8,_0x3f3abc),followUP(_0x333ba8,'Successfully\x20updated\x20`'+_0x333ba8['values'][0x0]+'`\x20to:\x20**'+_0x3f3abc['first']()['content']+'**');});}catch(_0x413e14){return console['log'](_0x413e14);}})['catch'](_0x2564e9=>{return resetEmbed(_0x333ba8,_0x2564e9),followUP(_0x333ba8,'Timed\x20out.');});});});}};