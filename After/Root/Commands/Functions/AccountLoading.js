const Discord=require('discord.js'),Client=require('../../../bot.js'),mineflayer=require('mineflayer'),c=require('chalk'),Canvas=require('canvas'),Vec3=require('vec3')['Vec3'],fs=require('fs'),delay=_0x27a876=>new Promise(_0x59196b=>setTimeout(_0x59196b,_0x27a876)),socks=require('socks')['SocksClient'],ProxyAgent=require('proxy-agent'),autoeat=require('mineflayer-auto-eat'),pathfinder=require('mineflayer-pathfinder')['pathfinder'],blockFinderPlugin=require('mineflayer-blockfinder')(mineflayer);let loggedIn=[];const invalidAccounts=[],errorAccounts=[],usedEmails=[],usedProxies=[];let autoRelogData={'queue':[],'waiting':![],'timer':0x5};var CurrentlyLoading=![];let throttled=![],currentProxy=0x0,accountsOnProxy=0x0,credentials,proxies,randomProxies;var interaction,stopLoading=![];let throttleTime=0x64,autoRelogEnabled=!![];const debug=![];async function startUp(_0x50a1bd,_0x2fbf5d){if(interaction!=_0x50a1bd)interaction=_0x50a1bd;CurrentlyLoading=!![],stopLoading=![],await startLoading(_0x2fbf5d);}async function startLoading(_0x16e983){await checkStatus(![],async function(){await checkData(async function(){await getThrottle(async function(){await getAccount(_0x16e983,async function(_0x3e4b12){await createBot(_0x3e4b12,_0x16e983);});});});});}async function checkStatus(_0x33009b,_0x185627){if(_0x33009b)stopLoading=!![];else{if(stopLoading)Ready();else _0x185627();}}async function createBot({username:_0xc53d71,password:_0x4988ba},_0x30b3bb,_0xb06ea0){if(debug)console['log'](_0xc53d71+'\x20'+_0x4988ba);fs['readFile']('./Settings.json','utf8',async function(_0x2b59da,_0x62ea61){var _0x109e91=JSON['parse'](_0x62ea61);let _0x5d6f1c=null;if(_0x109e91['useProxies'])getProxy(cProxy,async function(){process['env']['NODE_TLS_REJECT_UNAUTHORIZED']='0',_0x5d6f1c=mineflayer['createBot']({'username':_0xc53d71,'password':_0x4988ba,'host':_0x109e91['serverIP'],'port':_0x109e91['port'],'version':_0x109e91['version'],'viewDistance':_0x109e91['renderDistance']['toLowerCase'](),'auth':'microsoft','agent':new ProxyAgent({'protocol':'socks5:','host':cProxy['split'](':')[0x0],'port':parseInt(cProxy['split'](':')[0x1]),'username':cProxy['split'](':')[0x2],'password':cProxy['split'](':')[0x3]}),'connect':_0x5b3652=>{socks['createConnection']({'proxy':{'host':cProxy['split'](':')[0x0],'port':parseInt(cProxy['split'](':')[0x1]),'type':0x5,'userId':cProxy['split'](':')[0x2],'password':cProxy['split'](':')[0x3]},'command':'connect','destination':{'host':_0x109e91['serverIP'],'port':_0x109e91['port']}},(_0x669a0c,_0x23d6e9)=>{if(_0x669a0c){if(debug)console['log']('Here:\x20');return console['log'](_0x669a0c);}_0x5b3652['setSocket'](_0x23d6e9['socket']),_0x5b3652['emit']('connect');});}});});else{if(debug)console['log']('not\x20using\x20proxies');try{_0x5d6f1c=mineflayer['createBot']({'host':_0x109e91['serverIP'],'port':_0x109e91['port'],'username':_0xc53d71,'password':_0x4988ba,'version':_0x109e91['version'],'viewDistance':_0x109e91['renderDistance']['toLowerCase'](),'auth':'microsoft'});}catch(_0x206e2a){if(debug)console['log']('here222');console['log'](_0x206e2a);}}registerEvents(interaction,_0x5d6f1c,_0xc53d71,_0x4988ba,async function(){if(_0xb06ea0)autoRelogData['queue']['splice'](0x0,0x1),autoRelogData['queue']['length']&&setTimeout(()=>{createBot(autoRelogData['queue'][0x0],{},!![]);},_0x109e91['joinSpeed']*0x3e8);else{if(_0x30b3bb['multiple']){if(_0x30b3bb['loaded']['currentlyLoaded']==_0x30b3bb['loaded']['amount']-0x1)Ready(!![]);else{let _0x30f0fe=_0x30b3bb;_0x30f0fe['loaded']['currentlyLoaded']++,updateMessage(![]),setTimeout(()=>{startLoading(_0x30f0fe);},_0x109e91['joinSpeed']*0x3e8);}}else Ready(!![]);}});});}async function autoRelog(){if(CurrentlyLoading)return;if(autoRelogData['waiting']){let _0x5d4526=setInterval(async function(){if(debug)console['log']('timer\x20is:\x20'+autoRelogData['timer']);if(autoRelogData['timer']<=0x0)clearInterval(_0x5d4526),await createBot(autoRelogData['queue'][0x0],{},!![]),autoRelogData['waiting']=![],autoRelogData['timer']=0x5;else{autoRelogData['timer']-=0x1;if(debug)console['log']('timer\x20is\x20now:\x20'+autoRelogData['timer']);}},0x3e8);}}async function registerEvents(_0x24d3bd,_0x25c9d2,_0x42905c,_0x2aa74c,_0xbed77a){fs['readFile']('./Settings.json','utf8',async function(_0x1f2281,_0x36f5ca){var _0x42d2ae=JSON['parse'](_0x36f5ca);if(_0x42d2ae['joinSpeed']==0x0)_0xbed77a();if(_0x42d2ae['autoEat'])_0x25c9d2['loadPlugin'](autoeat);_0x25c9d2['loadPlugin'](pathfinder),_0x25c9d2['loadPlugin'](blockFinderPlugin),_0x25c9d2['once']('login',async function(){console['log'](c['bold']['greenBright']('[LOGIN]\x20')+c['reset']['bold'](''+_0x25c9d2['username'])+c['reset']('\x20succesfully\x20logged\x20in!'));let _0x2c8af9=await Canvas['loadImage']('http://cravatar.eu/head/'+_0x25c9d2['username']+'/32.png');loggedIn['push']({'username':_0x25c9d2['username'],'email':_0x42905c,'pass':_0x2aa74c,'avatar':_0x2c8af9,'selected':![],'loginTimestamp':new Date()['getTime'](),'occupation':{'currentlyOccupied':{'busy':![],'occupation':''},'farming':{'currentlyFarming':![],'crop':'wheat','cropSeed':'wheat_seeds','depositCoords':'Auto','beforeDepositVec':new Vec3(),'depositVec':new Vec3(),'harvest':{'cropBlock':Object,'waiting':!![],'moving':![]},'cropCount':0x0,'seedCount':0x0},'follow':{'followingPlayer':![],'playerIGN':''},'fishing':![],'sandPrinting':![]},'reconnect':{},'botUser':_0x25c9d2});if(_0x42d2ae['autoSelect'])loggedIn[loggedIn['length']-0x1]['selected']=!![];if(CurrentlyLoading)updateMessage(![]);if(_0x42d2ae['joinSpeed']!=0x0)_0xbed77a();}),_0x25c9d2['once']('spawn',async function(){if(_0x42d2ae['joinCommand']!=''&&_0x42d2ae['joinCommand']['toLowerCase']()!='none')_0x25c9d2['chat'](_0x42d2ae['joinCommand']);_0x42d2ae['autoEat']&&(_0x25c9d2['autoEat']['options']={'priority':'saturation','startAt':0x10,'bannedFood':['golden_apple','enchanted_golden_apple','rotten_flesh']});}),_0x25c9d2['on']('end',function(_0xc61318){if(debug)console['log']('run\x20end');if(debug)console['log']('end\x20'+_0xc61318);getLoadingStatus(async function(_0x4852f4){_0x4852f4?(console['log'](c['bold']['yellowBright']('[ERROR]\x20')+c['reset']['bold'](''+_0x42905c)+c['reset']('\x20was\x20removed\x20from\x20the\x20server.\x20(Banned,\x20kicked,\x20etc.)')),!errorAccounts['includes'](_0x42905c)&&(errorAccounts['push'](_0x42905c),console['log'](c['bold']['yellowBright']('[ERROR]\x20')+c['reset']['bold'](''+_0x42905c)+c['reset']('\x20couldn\x27t\x20join\x20the\x20server.'))),updateMessage(![])):(console['log'](c['bold']['yellowBright']('[ERROR]\x20')+c['reset']['bold'](''+_0x42905c)+c['reset']('\x20was\x20removed\x20from\x20the\x20server.\x20(Banned,\x20kicked,\x20etc.)')),errorAccounts['push'](_0x42905c));});let _0x99c21d=![];loggedIn['forEach']((_0x2a4921,_0x5f2bd5)=>{if(_0x99c21d)return;_0x2a4921['email']==_0x42905c&&(autoRelogEnabled&&(autoRelogData['queue']['push']({'username':_0x42905c,'password':_0x2aa74c}),!autoRelogData['waiting']?(autoRelogData['waiting']=!![],autoRelog()):autoRelogData['timer']=0x5),loggedIn['splice'](_0x5f2bd5,0x1),_0x99c21d=!![]),_0x5f2bd5++;});if(CurrentlyLoading){if(_0x42d2ae['joinSpeed']!=0x0)_0xbed77a();}}),_0x25c9d2['on']('kicked',async function(_0x2d76c0){if(debug)console['log']('run\x20kicked');let _0x18202a=null;try{_0x18202a=JSON['parse'](_0x2d76c0);}catch(_0x4e408a){console['log'](_0x4e408a);if(_0x4e408a)_0x18202a=null;}let _0xdec51='';if(_0x18202a!=null){if(_0x18202a['extra']){if(_0x18202a['extra']['length']){await console['log'](c['bold']['gray']('[LOG\x20START]')),await _0x18202a['extra']['forEach'](async _0x8e1cfa=>{console['log'](c['bold']['redBright']('->\x20')+c['reset'](_0x8e1cfa['text']['replace'](/\n/g,''))),_0xdec51=_0xdec51+('->\x20'+_0x8e1cfa['text']['replace'](/\n/g,'')+'\x0a');});if(_0x18202a['text']['length'])await console['log'](c['bold']['redBright']('->\x20')+c['reset'](_0x18202a['text']));await console['log'](c['bold']['gray']('[LOG\x20END]'));}}else await console['log'](c['bold']['gray']('[LOG\x20START]')),await console['log'](_0x18202a),await console['log'](c['bold']['gray']('[LOG\x20END]'));}else console['log'](_0x2d76c0),_0xdec51=_0x2d76c0;await new Promise(_0xebc678=>setTimeout(_0xebc678,0x1f4)),_0x2d76c0['toLowerCase']()['includes']('throttled')&&(throttled=!![],errorAccounts['includes'](_0x42905c)&&errorAccounts['forEach']((_0x17fc4b,_0x141ce9)=>{_0x17fc4b==_0x42905c&&(errorAccounts[_0x141ce9]=errorAccounts[_0x141ce9]+'\x20(Connection\x20Throttled)'),_0x141ce9++;})),_0x2d76c0['toLowerCase']()['includes']('banned')&&(errorAccounts['includes'](_0x42905c)&&errorAccounts['forEach']((_0x505321,_0x25eb7f)=>{_0x505321==_0x42905c&&(errorAccounts[_0x25eb7f]=errorAccounts[_0x25eb7f]+'\x20(Banned)'),_0x25eb7f++;})),_0x42d2ae['errorLogging']&&(!_0x42d2ae['errorLoggingChannel']||_0x42d2ae['errorLoggingChannel']=='Not\x20set.'?console['log'](c['bold']['redBright']('ErrorLogging\x20is\x20enabled\x20but\x20no\x20channel\x20is\x20set.')):Client['client']['channels']['fetch'](_0x42d2ae['errorLoggingChannel'])['then'](_0x11b51e=>{if(_0x11b51e){let _0x4af68b=new Discord['MessageEmbed']()['setColor'](_0x42d2ae['embedColor'])['setAuthor']({'name':''+_0x25c9d2['_client']['username'],'iconURL':'http://cravatar.eu/head/'+_0x25c9d2['_client']['username']+'/32.png'})['setDescription']('Bot:\x20**'+_0x25c9d2['_client']['username']+'**\x20(`'+_0x42905c+'`)'+'\x20caused\x20an\x20error.\x20Details\x20regarding\x20the\x20error\x20are\x20listed\x20below:')['addField']('Error:','```diff\x0a'+_0xdec51+'```');_0x11b51e['send']({'embeds':[_0x4af68b]});}else console['log'](c['bold']['redBright']('ErrorLogging\x20channel\x20('+_0x42d2ae['errorLoggingChannel']+')\x20was\x20not\x20found.'));})['catch'](console['error']));}),_0x25c9d2['on']('error',async function(_0x1c4a13){if(debug)console['log']('error\x20caused\x20here:\x201111');_0x1c4a13['toString']()['includes']('Invalid\x20credentials.')?!invalidAccounts['includes'](_0x42905c)&&(invalidAccounts['push'](_0x42905c),console['log'](c['bold']['redBright']('[Invalid]\x20')+c['reset']['bold'](''+_0x42905c)+c['reset']('\x20-\x20Invalid\x20credentials.'))):!errorAccounts['includes'](_0x42905c)&&(errorAccounts['push'](_0x42905c),console['log'](c['bold']['yellowBright']('[ERROR]\x20')+c['reset']['bold'](''+_0x42905c)+c['reset']('\x20couldn\x27t\x20join\x20the\x20server.'))),_0x42d2ae['errorLogging']&&(!_0x42d2ae['errorLoggingChannel']||_0x42d2ae['errorLoggingChannel']=='Not\x20set.'?console['log'](c['bold']['redBright']('ErrorLogging\x20is\x20enabled\x20but\x20no\x20channel\x20is\x20set.')):Client['client']['channels']['fetch'](_0x42d2ae['errorLoggingChannel'])['then'](_0x3d13a3=>{if(_0x3d13a3){let _0x17d0cf=new Discord['MessageEmbed']()['setColor'](_0x42d2ae['embedColor'])['setDescription']('Account:\x20'+_0x42905c)['addField']('Error:','```'+_0x1c4a13['toString']()+'```');_0x3d13a3['send']({'embeds':[_0x17d0cf]});}else console['log'](c['bold']['redBright']('ErrorLogging\x20channel\x20('+_0x42d2ae['errorLoggingChannel']+')\x20was\x20not\x20found.'));})['catch'](console['error']));}),_0x42d2ae['autoEat']&&_0x25c9d2['on']('health',()=>{if(_0x25c9d2['food']===0x14)_0x25c9d2['autoEat']['disable']();else _0x25c9d2['autoEat']['enable']();});});}async function Ready(_0x2534b0){updateMessage(!![],![],interaction);}async function updateMessage(_0x26a185,_0x7f37fd,_0xd0e81b){!_0x7f37fd&&(CurrentlyLoading&&fs['readFile']('./Settings.json','utf8',async function(_0x1d9a7a,_0x2d4d1c){var _0x11ba09=JSON['parse'](_0x2d4d1c);let _0x1b222a=errorAccounts['map'](_0x181805=>_0x181805+'\x0a')['toString']()['split'](',')['join']('');if(errorAccounts['length']==0x0)_0x1b222a='-';let _0x4df22e=invalidAccounts['map'](_0x200933=>_0x200933+'\x0a')['toString']()['split'](',')['join']('');if(invalidAccounts['length']==0x0)_0x4df22e='-';let _0x520cb5=await interaction['message']['embeds'][0x0];_0x520cb5['setDescription'](_0x520cb5['description']['split']('Currently\x20loaded:\x20')[0x0]+('Currently\x20loaded:\x20**'+loggedIn['length']+'/'+credentials['length']+'**')),_0x520cb5['fields'][0x0]['value']='```'+_0x1b222a+'```',_0x520cb5['fields'][0x1]['value']='```'+_0x4df22e+'```';if(!_0x26a185)await interaction['message']['edit']({'embeds':[_0x520cb5]});else{CurrentlyLoading=![];let _0x1e1c1f=interaction['message']['components'][0x0];_0x1e1c1f['components'][0x0]['disabled']=![],_0x1e1c1f['components'][0x1]['disabled']=![],_0x1e1c1f['components'][0x2]['disabled']=!![],await interaction['editReply']('Finished...')['then'](_0x81305b=>{setTimeout(function(){_0x81305b['delete']();},0x1f4);}),await interaction['message']['edit']({'embeds':[_0x520cb5],'components':[_0x1e1c1f]}),console['log'](c['bold']['green']('[Account\x20Loading]')+c['reset']['bold']('\x20Loading\x20accounts\x20has\x20finished.')),interaction=null;}}));}async function getAccount(_0x2b18a7,_0x15d542){await updateUsedEmails();var _0x1e0680=0x0;while(usedEmails['includes'](credentials[_0x1e0680]['username'])||invalidAccounts['includes'](credentials[_0x1e0680]['username'])){if(_0x1e0680==credentials['length']-0x1){if(!_0x2b18a7['multiple'])return Ready(0x1);return Ready(_0x2b18a7['loaded']['currentlyLoaded']);}else _0x1e0680++;}usedEmails['push'](credentials[_0x1e0680]['username']),_0x15d542(credentials[_0x1e0680]);}async function updateUsedEmails(_0x389f85){loggedIn['length']&&loggedIn['forEach']((_0x18c2da,_0x267f0b)=>{if(!usedEmails['includes'](_0x18c2da['email']))usedEmails['splice'](_0x267f0b,0x1);});}async function getThrottle(_0xe32f13){throttled?(interaction['followUp']({'content':'Bots\x20are\x20currently\x20throttled,\x20waiting:\x20x'}),delay(throttleTime),throttled=![],_0xe32f13()):_0xe32f13();}async function checkData(_0x267584){fs['readFile']('./Settings.json','utf8',async function(_0x44927a,_0x195e82){var _0x7d1b5f=JSON['parse'](_0x195e82);if(_0x44927a)return console['log'](_0x44927a);try{credentials=JSON['parse'](fs['readFileSync']('./Accounts.json')),proxies=JSON['parse'](fs['readFileSync']('./Proxies.json')),randomProxies=proxies['slice'](0x0);}catch(_0x591c66){console['log'](_0x591c66);}if(!credentials['length'])return await _0x3555a3(interaction,'No\x20accounts\x20found.\x20Please\x20either\x20add\x20accounts\x20using\x20\x27.accounts\x27,\x20or\x20add\x20them\x20manually\x20in\x20the\x20\x27Accounts.json\x27\x20file.');if(credentials[0x0]['username']=='exampleEmail1')return await _0x3555a3(interaction,'The\x20\x27Accounts.json\x27\x20file\x20still\x20contains\x20example\x20accounts.\x20Please\x20remove\x20them\x20and\x20add\x20new\x20ones\x20using\x20\x27.accounts\x27\x20or\x20manually\x20update\x20the\x20\x27Accounts.json\x27\x20file.');if(_0x7d1b5f['useProxies']){if(!proxies['length'])return await _0x3555a3(interaction,'You\x27re\x20currently\x20attempting\x20to\x20load\x20accounts\x20using\x20proxies\x20without\x20any\x20proxies\x20saved.\x20Please\x20add\x20them\x20inside\x20the\x20\x27Proxies.json\x27\x20file.');if(proxies[0x0]['split'](':')[0x0]=='address')return await _0x3555a3(interaction,'The\x20\x27Proxies.json\x27\x20file\x20still\x20contains\x20example\x20proxies.\x20Please\x20remove\x20them\x20and\x20add\x20new\x20ones\x20in\x20the\x20file.');}_0x267584();async function _0x3555a3(_0xc73c7d,_0x4ff734){CurrentlyLoading=![];let _0x510039=_0xc73c7d['message']['components'][0x0];_0x510039['components'][0x0]['disabled']=![],_0x510039['components'][0x1]['disabled']=![],_0x510039['components'][0x2]['disabled']=!![],await _0xc73c7d['message']['edit']({'components':[_0x510039]}),await _0xc73c7d['editReply']({'content':_0x4ff734});}});}async function getProxy(_0x34afdd){fs['readFile']('./Settings.json','utf8',async function(_0x3ec221,_0x2a51ea){var _0xe85187=JSON['parse'](_0x2a51ea);let _0xc269dc;if(_0xe85187['randomizeOrder']){if(!randomProxies['length'])randomProxies=proxies['slice'](0x0);_0xc269dc=randomProxies[Math['floor'](Math['random']()*randomProxies['length'])],randomProxies['forEach']((_0x3537f9,_0x1f4c02=0x0)=>{if(_0x3537f9==_0xc269dc)randomProxies['splice'](_0x1f4c02,0x1);});}else accountsOnProxy++,accountsOnProxy>=_0xe85187['accountsPerProxy']&&(currentProxy==proxies['length']-0x1?currentProxy=0x0:currentProxy++,accountsOnProxy=0x0),_0xc269dc=proxies[currentProxy];_0x34afdd(_0xc269dc);});}async function getLoadingStatus(_0x5e0542){_0x5e0542(CurrentlyLoading);}async function removeLogin(_0x3ad433){if(debug)console['log']('loggedIn.length\x20'+loggedIn['length']);let _0x4dcc93=loggedIn['splice'](0x0);if(debug)console['log']('copy.length\x20'+_0x4dcc93['length']);_0x4dcc93=loggedIn['filter'](_0x42e343=>_0x42e343['selected']!==!![]);if(debug)console['log']('copy.length\x20'+_0x4dcc93['length']);loggedIn=_0x4dcc93['splice'](0x0);if(debug)console['log']('loggedIn.length\x20'+loggedIn['length']);_0x3ad433();}module['exports']={'loggedIn':loggedIn,'startUp':startUp,'getLoadingStatus':getLoadingStatus,'checkStatus':checkStatus,'removeLogin':removeLogin};