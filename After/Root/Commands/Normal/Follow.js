const mineflayer=require('mineflayer'),{pathfinder,Movements,goals}=require('mineflayer-pathfinder'),GoalFollow=goals['GoalFollow'],chalk=require('chalk'),AccountLoading=require('../Functions/AccountLoading.js'),fs=require('fs'),{Vec3}=require('vec3');module['exports']={'name':'follow','aliases':['f'],'run':async(_0x313331,_0x47b742,_0x3eb177,_0x572c4e)=>{fs['readFile']('./Settings.json','utf8',function(_0x27ff37,_0x1389f9){var _0x93dde8=JSON['parse'](_0x1389f9);let _0x145ced=AccountLoading['loggedIn'],_0xeee68b=![];_0x145ced['forEach'](_0x540cd9=>{_0x540cd9['selected']&&(_0xeee68b=!![]);});let _0x57d41d=new _0x572c4e['MessageEmbed']()['setColor'](_0x93dde8['embedColor'])['setDescription']('No\x20bots\x20are\x20currently\x20selected!\x20Use\x20`.select`\x20to\x20select\x20an\x20account.'),_0x3dec74=new _0x572c4e['MessageEmbed']()['setColor'](_0x93dde8['embedColor'])['setDescription']('Use\x20`.follow\x20<IGN>`');if(!_0xeee68b)return _0x47b742['channel']['send']({'embeds':[_0x57d41d]});if(!_0x3eb177[0x0])return _0x47b742['channel']['send']({'embeds':[_0x3dec74]});let _0x3c1dc3='';_0x145ced['forEach'](_0x2076f7=>{if(_0x2076f7['selected']){if(_0x2076f7['occupation']['currentlyOccupied']['busy']&&!_0x2076f7['occupation']['follow']['followingPlayer']){let _0x2bec6a=new _0x572c4e['MessageEmbed']()['setColor'](_0x93dde8['embedColor'])['setDescription']('Bot:\x20`'+_0x2076f7['username']+'`\x20is\x20currently\x20busy\x20`'+_0x2076f7['occupation']['currentlyOccupied']['occupation']+'`.');return _0x47b742['channel']['send']({'embeds':[_0x2bec6a]});}if(_0x2076f7['occupation']['follow']['followingPlayer']&&_0x2076f7['occupation']['follow']['playerIGN']==_0x3eb177[0x0]){let _0x3c0c78=new _0x572c4e['MessageEmbed']()['setColor'](_0x93dde8['embedColor'])['setDescription']('Bot:\x20`'+_0x2076f7['username']+'`\x20is\x20already\x20following\x20`'+_0x3eb177[0x0]+'`.');return _0x47b742['channel']['send']({'embeds':[_0x3c0c78]});}let _0x881c50=_0x2076f7['botUser']['players'][_0x3eb177[0x0]]?_0x2076f7['botUser']['players'][_0x3eb177[0x0]]['entity']:null;if(!_0x881c50){let _0x520087=new _0x572c4e['MessageEmbed']()['setColor'](_0x93dde8['embedColor'])['setDescription']('Bot:\x20`'+_0x2076f7['username']+'`\x20was\x20not\x20able\x20to\x20find\x20`'+_0x3eb177[0x0]+'`.');return _0x47b742['channel']['send']({'embeds':[_0x520087]});}if(!_0x2076f7['occupation']['currentlyOccupied']['busy'])_0x2076f7['occupation']['currentlyOccupied']['busy']=!![];if(!_0x2076f7['occupation']['follow']['followingPlayer'])_0x2076f7['occupation']['follow']['followingPlayer']=!![];_0x2076f7['occupation']['follow']['playerIGN']=_0x3eb177[0x0],_0x19a2ed(_0x2076f7,_0x3eb177[0x0]);let _0x12e527=new _0x572c4e['MessageEmbed']()['setColor'](_0x93dde8['embedColor'])['setDescription']('Bot:\x20`'+_0x2076f7['username']+'`\x20started\x20following\x20`'+_0x3eb177[0x0]+'`.');_0x47b742['channel']['send']({'embeds':[_0x12e527]});}});async function _0x19a2ed(_0x2ebf68,_0x4256b9){if(!_0x2ebf68['occupation']['follow']['followingPlayer']){let _0x5a0f0d=new _0x572c4e['MessageEmbed']()['setColor'](_0x93dde8['embedColor'])['setDescription']('Bot:\x20`'+_0x2ebf68['username']+'`\x20stopped\x20following:\x20`'+_0x2ebf68['occupation']['follow']['playerIGN']+'`.');return _0x2ebf68['occupation']['currentlyOccupied']['busy']=![],_0x2ebf68['occupation']['currentlyOccupied']['occupation']='',_0x2ebf68['occupation']['follow']['playerIGN']='',_0x2ebf68['botUser']['setControlState']('forward',![]),_0x2ebf68['botUser']['setControlState']('jump',![]),_0x47b742['channel']['send']({'embeds':[_0x5a0f0d]});}await _0x3f4367(_0x2ebf68,_0x4256b9),setTimeout(async function(){_0x19a2ed(_0x2ebf68,_0x4256b9);},_0x93dde8['followSpeed']);}async function _0x3f4367(_0xebb0a4,_0x200c75){console['log'](_0xebb0a4['botUser']['food']),console['log'](_0xebb0a4['botUser']['foodSaturation']);let _0x41cd81=_0xebb0a4['botUser']['players'][_0x200c75]?_0xebb0a4['botUser']['players'][_0x200c75]['entity']:null;if(!_0x41cd81){let _0x58991e=new _0x572c4e['MessageEmbed']()['setColor'](_0x93dde8['embedColor'])['setDescription']('Bot:\x20`'+_0xebb0a4['username']+'`\x20lost\x20track\x20of\x20`'+_0xebb0a4['occupation']['follow']['playerIGN']+'`.');return _0xebb0a4['botUser']['setControlState']('forward',![]),_0xebb0a4['botUser']['setControlState']('jump',![]),_0xebb0a4['occupation']['currentlyOccupied']['busy']=![],_0xebb0a4['occupation']['follow']['followingPlayer']=![],_0x47b742['channel']['send']({'embeds':[_0x58991e]});}_0xebb0a4['botUser']['lookAt'](new Vec3(parseInt(_0xebb0a4['botUser']['players'][_0x200c75]['entity']['position']['x']),parseInt(_0xebb0a4['botUser']['players'][_0x200c75]['entity']['position']['y'])+0x1,parseInt(_0xebb0a4['botUser']['players'][_0x200c75]['entity']['position']['z'])));try{_0xebb0a4['botUser']['entity']['position']['distanceTo'](_0xebb0a4['botUser']['players'][_0x200c75]['entity']['position'])<0x2?(_0xebb0a4['botUser']['setControlState']('forward',![]),_0xebb0a4['botUser']['setControlState']('jump',![])):_0xebb0a4['botUser']['setControlState']('forward',!![]),_0xebb0a4['botUser']['players'][_0x200c75]['entity']['position']['y']>_0xebb0a4['botUser']['entity']['position']['y']?_0xebb0a4['botUser']['setControlState']('jump',!![]):_0xebb0a4['botUser']['setControlState']('jump',![]);}catch(_0x3c3fdb){let _0x574390=new _0x572c4e['MessageEmbed']()['setColor'](_0x93dde8['embedColor'])['setDescription']('Follow\x20error\x20using:\x20`'+_0xebb0a4['username']+'`');return _0x47b742['channel']['send']({'embeds':[_0x574390]});}}return;});}};