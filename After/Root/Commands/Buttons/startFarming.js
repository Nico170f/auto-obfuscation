const AccountLoading=require('../Functions/AccountLoading.js'),fs=require('fs'),pathfinder=require('mineflayer-pathfinder')['pathfinder'],Movements=require('mineflayer-pathfinder')['Movements'],delay=_0x149d3e=>new Promise(_0x5cafb6=>setTimeout(_0x5cafb6,_0x149d3e)),{GoalNear,GoalGetToBlock}=require('mineflayer-pathfinder')['goals'],{Vec3}=require('vec3');let mcData=null,defaultMove=null,range=0xa,pathfinding=!![];module['exports']={'name':'farmingStartButton','run':async(_0x166b95,_0x166ce9,_0x1dfb01)=>{fs['readFile']('./Settings.json','utf8',function(_0x376d0b,_0x3450bc){var _0x440975=JSON['parse'](_0x3450bc);let _0x5dec86=AccountLoading['loggedIn'];if(_0x166ce9['user']['tag']!==_0x166ce9['message']['embeds'][0x0]['footer']['text'])return _0x166ce9['reply']({'content':'Please\x20use\x20`.farm`\x20to\x20do\x20this.','ephemeral':!![]});if(!_0x5dec86['length'])return _0x166ce9['reply']({'content':'No\x20bots\x20are\x20currently\x20loaded.','ephemeral':!![]});let _0x3ba4f6;_0x5dec86['forEach'](_0x4cc906=>{_0x4cc906['username']==_0x166ce9['message']['embeds'][0x0]['author']['name']['split'](':\x20')[0x1]&&(_0x3ba4f6=_0x4cc906);});if(!_0x3ba4f6)return _0x166ce9['reply']({'content':'Bot:\x20**'+_0x166ce9['message']['embeds'][0x0]['author']['name']['split'](':\x20')[0x1]+'**\x20is\x20not\x20online.','ephemeral':!![]});if(_0x3ba4f6['occupation']['currentlyOccupied']['busy']==!![]&&_0x3ba4f6['occupation']['farming']['currentlyFarming']==![])return _0x166ce9['reply']({'content':_0x3ba4f6['username']+'\x20is\x20curretly\x20occupied\x20doing\x20a\x20different\x20task.','ephemeral':!![]});if(_0x3ba4f6['occupation']['currentlyOccupied']['busy']==!![]&&_0x3ba4f6['occupation']['farming']['currentlyFarming']==!![])return _0x166ce9['reply']({'content':_0x3ba4f6['username']+'\x20is\x20already\x20farming.','ephemeral':!![]});if(!mcData)mcData=require('minecraft-data')(_0x3ba4f6['botUser']['version']);!defaultMove&&(defaultMove=new Movements(_0x3ba4f6['botUser'],mcData),defaultMove['canDig']=![],defaultMove['scafoldingBlocks']=[],defaultMove['allowFreeMotion']=!![],defaultMove['blocksToAvoid']['delete'](0x3b),defaultMove['blocksToAvoid']['delete'](0x33),defaultMove['blocksToAvoid']['delete'](0xb),defaultMove['allowSprinting']=!![]);_0x3ba4f6['occupation']['farming']['depositVec']=_0x3ba4f6['occupation']['farming']['depositCoords'],_0x3ba4f6['occupation']['currentlyOccupied']['busy']=!![],_0x3ba4f6['occupation']['farming']['currentlyFarming']=!![],_0x3ba4f6['occupation']['currentlyOccupied']['occupation']='farming';pathfinding&&_0x3ba4f6['botUser']['pathfinder']['setMovements'](defaultMove);let _0x2e27b0;async function _0x1e60b8(){_0x2e27b0=setInterval(async function(){if(!_0x3ba4f6['occupation']['farming']['currentlyFarming'])return clearInterval(_0x2e27b0);let _0x6cb4c0=0x0;_0x3ba4f6['botUser']['inventory']['items']()['forEach'](_0x4c6463=>{if(_0x3ba4f6['occupation']['farming']['crop']=='wheat'){if(_0x4c6463['type']==0x128)_0x6cb4c0+=_0x4c6463['count'];}else{if(_0x3ba4f6['occupation']['farming']['crop']=='carrots'){if(_0x4c6463['type']==0x187)_0x6cb4c0+=_0x4c6463['count'];}else{if(_0x3ba4f6['occupation']['farming']['crop']=='potatoes'){if(_0x4c6463['type']==0x188)_0x6cb4c0+=_0x4c6463['count'];}else{if(_0x3ba4f6['occupation']['farming']['crop']=='pumpkin'){if(_0x4c6463['type']==0x56)_0x6cb4c0+=_0x4c6463['count'];}else{if(_0x3ba4f6['occupation']['farming']['crop']=='melon_block'){if(_0x4c6463['type']==0x67)_0x6cb4c0+=_0x4c6463['count'];}}}}}}),_0x3ba4f6['occupation']['farming']['cropCount']+=_0x6cb4c0-_0x3ba4f6['occupation']['farming']['cropCount'];},0x1388);}_0x29ae3c(),_0x1e60b8();async function _0x29ae3c(){console['log']('farming\x20loop');if(!_0x3ba4f6['occupation']['farming']['currentlyFarming']){_0x3ba4f6['occupation']['currentlyOccupied']['busy']=![],_0x3ba4f6['occupation']['currentlyOccupied']['occupation']='',_0x3ba4f6['botUser']['setControlState']('forward',![]),_0x3ba4f6['botUser']['look'](0x0,0x0,![]);return;}_0x3ba4f6['occupation']['farming']['cropCount']>_0x440975['cropsTillDeposit']||_0x3ba4f6['botUser']['inventory']['slots']['filter'](_0x1e3220=>_0x1e3220==null)['length']-0x8<0x3?(clearInterval(_0x2e27b0),await _0x3ecde6()):(await _0x496d9a(),setTimeout(_0x29ae3c,0xfa));}async function _0x3ecde6(){console['log']('findDepositChest'),clearInterval(_0x2e27b0);if(typeof _0x3ba4f6['occupation']['farming']['depositVec']==='string'||_0x3ba4f6['occupation']['farming']['depositVec']instanceof String){if(_0x3ba4f6['occupation']['farming']['depositCoords']['toLowerCase']()=='auto'){let _0x5a964e=await _0x3ba4f6['botUser']['findBlockSync']({'point':_0x3ba4f6['botUser']['entity']['position'],'matching':[mcdata['blocksByName']['trapped_chest']['id'],mcdata['blocksByName']['chest']['id']],'maxDistance':0x32,'count':0x1});if(!_0x5a964e)return _0x3ba4f6['occupation']['currentlyOccupied']['busy']=![],_0x3ba4f6['occupation']['farming']['currentlyFarming']=![],_0x3ba4f6['occupation']['currentlyOccupied']['occupation']='',_0x166ce9['message']['channel']['send']('<@'+_0x166ce9['user']['id']+'>\x20No\x20deposit\x20chest\x20found\x20by:\x20'+_0x3ba4f6['username']+'.\x20Bot\x20was\x20stopped.');_0x3ba4f6['occupation']['farming']['depositVec']=_0x5a964e[0x0]['position'];}else _0x3ba4f6['occupation']['farming']['depositVec']=new Vec3(parseInt(_0x3ba4f6['occupation']['farming']['depositCoords']['split'](',\x20')[0x0]),parseInt(_0x3ba4f6['occupation']['farming']['depositCoords']['split'](',\x20')[0x1]),parseInt(_0x3ba4f6['occupation']['farming']['depositCoords']['split'](',\x20')[0x2]));}_0x3ba4f6['occupation']['farming']['beforeDepositVec']=_0x3ba4f6['botUser']['entity']['position'];if(pathfinding)await _0x3ba4f6['botUser']['pathfinder']['goto'](new GoalNear(_0x3ba4f6['occupation']['farming']['depositVec']['x'],_0x3ba4f6['occupation']['farming']['depositVec']['y'],_0x3ba4f6['occupation']['farming']['depositVec']['z'],1.5),_0x30fe2d);else return console['log']('not\x20pathfinding\x20-\x20end\x20(do\x20smtn)');}async function _0x30fe2d(){console['log']('depositLoot');let _0x164304=_0x3ba4f6['botUser']['blockAt'](_0x3ba4f6['occupation']['farming']['depositVec']),_0x2d91c7;try{_0x2d91c7=await _0x3ba4f6['botUser']['openContainer'](_0x164304),_0x3ba4f6['occupation']['farming']['depositing']=!![];}catch(_0x36b2d1){let _0x534598=_0x36b2d1;console['log'](_0x36b2d1);}for(slot of _0x3ba4f6['botUser']['inventory']['slots']){let _0x6adfbf=['wheat','carrot','potato','pumpkin','melon','wheat_seeds'];if(slot&&_0x6adfbf['includes'](slot['name']))try{console['log'](slot['count']),await _0x2d91c7['deposit'](slot['type'],null,slot['count'],_0x4a8730=>{if(_0x4a8730){if(_0x4a8730['toString']()['toLowerCase']()['includes']('destination\x20full')){a,_0x3ba4f6['occupation']['farming']['currentlyFarming']=![];let _0x1d1bb6=_0x166ce9['guild']['channels']['cache']['get'](_0x440975['errorLoggingChannel']);if(_0x1d1bb6)_0x1d1bb6['send']('<@'+_0x166ce9['user']['id']+'>\x20'+_0x3ba4f6['username']+'\x27s\x20despoit\x20chest\x20is\x20full.\x20Bot\x20has\x20been\x20stopped.');else _0x166ce9['message']['channel']['send']('<@'+_0x166ce9['user']['id']+'>\x20'+_0x3ba4f6['username']+'\x27s\x20despoit\x20chest\x20is\x20full.\x20Bot\x20has\x20been\x20stopped.');_0x2d91c7['close']();return;}}});}catch(_0x18840c){console['log'](_0x18840c);}}try{await _0x2d91c7['close'](),_0x2d91c7=await _0x3ba4f6['botUser']['openContainer'](_0x164304);if(_0x3ba4f6['occupation']['farming']['crop']=='wheat')await _0x2d91c7['withdraw'](0x127,null,0x3);if(_0x3ba4f6['occupation']['farming']['crop']=='carrots')await _0x2d91c7['withdraw'](0x187,null,0x3);if(_0x3ba4f6['occupation']['farming']['crop']=='potatoes')await _0x2d91c7['withdraw'](0x188,null,0x3);_0x3ba4f6['occupation']['farming']['cropCount']=0x0,await _0x2d91c7['close']();}catch(_0x22ed02){console['log'](_0x22ed02);}if(pathfinding)await _0x3ba4f6['botUser']['pathfinder']['goto'](new GoalNear(_0x3ba4f6['occupation']['farming']['beforeDepositVec']['x'],_0x3ba4f6['occupation']['farming']['beforeDepositVec']['y'],_0x3ba4f6['occupation']['farming']['beforeDepositVec']['z'],0x1),_0x5b6b12);else return console['log']('not\x20pathfinding\x20-\x20end\x20(do\x20smtn)');function _0x5b6b12(){_0x3ba4f6['occupation']['farming']['harvest']['waiting']=!![],_0x29ae3c(),_0x1e60b8();}}async function _0x496d9a(){if(_0x3ba4f6['occupation']['farming']['harvest']['waiting']){let _0x503936=await _0x55e7a3();_0x503936&&(_0x503936['length']>=0x1&&(_0x3ba4f6['occupation']['farming']['harvest']['cropBlock']=_0x503936[0x0],_0x3ba4f6['occupation']['farming']['harvest']['waiting']=![]));}if(!_0x3ba4f6['occupation']['farming']['harvest']['moving']){if(!_0x3ba4f6['occupation']['farming']['harvest']['waiting']){await delay(0x14),console['log'](_0x3ba4f6['occupation']['farming']['harvest']['waiting']);if(pathfinding){let _0x3bc67c=_0x3ba4f6['occupation']['farming']['harvest']['cropBlock']['position'];try{console['log']('pathfind'),_0x3ba4f6['botUser']['pathfinder']['goto'](new GoalNear(_0x3bc67c['x'],_0x3bc67c['y'],_0x3bc67c['z'],0x1),_0x147993),console['log']('pathfind111');}catch(_0x53ff90){console['log'](_0x53ff90);}async function _0x147993(_0x36a70d,_0x328889){console['log']('breakCrop');if(!_0x36a70d)try{console['log']('breakCrop1111'),console['log'](_0x328889),await _0x3ba4f6['botUser']['dig'](_0x3ba4f6['occupation']['farming']['harvest']['cropBlock'],_0x42733b);}catch(_0x507b7a){console['log'](_0x507b7a);}else{console['log'](_0x36a70d);;}}async function _0x42733b(_0xae535){console['log']('equipSeed');if(!_0xae535)try{console['log']('equipSeed111'),await _0x3ba4f6['botUser']['dig'](_0x3ba4f6['occupation']['farming']['harvest']['cropBlock'],_0x54404b);}catch(_0x4e2268){console['log'](_0x4e2268);}else console['log'](_0xae535);}async function _0x54404b(_0x497cd8){console['log']('plantSeed');if(!_0x497cd8){console['log']('plantSeed111');try{await _0x5680f9(_0x3ba4f6['occupation']['farming']['cropSeed'],'hand');let _0x2c4018=_0x3ba4f6['botUser']['blockAt'](_0x3ba4f6['occupation']['farming']['harvest']['cropBlock']['position']['offset'](0x0,-0x1,0x0));try{await delay(0x32),await _0x3ba4f6['botUser']['placeBlock'](_0x2c4018,new Vec3(0x0,0x1,0x0)),_0x3ba4f6['botUser']['setControlState']('forward',!![]),await delay(0xaf),_0x3ba4f6['botUser']['setControlState']('forward',![]),await delay(0x12c),_0x3ba4f6['occupation']['farming']['harvest']['waiting']=!![],_0x3ba4f6['occupation']['farming']['harvest']['moving']=![],console['log'](_0x3ba4f6['occupation']['farming']['harvest']['waiting']);}catch(_0x3748fe){if(!_0x3748fe['toString']()['includes']('the\x20block\x20is\x20still\x20air'))console['log'](_0x3748fe);}}catch(_0x3287ee){console['log'](_0x3287ee);}}else console['log'](_0x497cd8);}}else{await _0x3ba4f6['botUser']['lookAt'](_0x3ba4f6['occupation']['farming']['harvest']['cropBlock']['position']);try{let _0xd4ec2f=_0x3ba4f6['botUser']['entity']['position']['distanceTo'](_0x3ba4f6['occupation']['farming']['harvest']['cropBlock']['position'])<0.5;if(_0x3ba4f6['occupation']['farming']['crop']=='pumpkin'||_0x3ba4f6['occupation']['farming']['crop']=='melon_block')_0xd4ec2f=_0x3ba4f6['botUser']['entity']['position']['distanceTo'](_0x3ba4f6['occupation']['farming']['harvest']['cropBlock']['position'])<0x2;if(_0xd4ec2f){_0x3ba4f6['botUser']['setControlState']('forward',![]);if(_0x3ba4f6['occupation']['farming']['crop']!='pumpkin'&&_0x3ba4f6['occupation']['farming']['crop']!='melon_block'){if(!_0x3ba4f6['botUser']['heldItem']||_0x3ba4f6['botUser']['heldItem']['name']!=_0x3ba4f6['occupation']['farming']['cropSeed'])try{try{console['log']('is\x20here1'),await _0x5680f9(_0x3ba4f6['occupation']['farming']['cropSeed'],'hand'),console['log']('is\x20here2');}catch(_0x5c787a){console['log'](_0x5c787a);}}catch(_0x582d25){console['log'](_0x582d25);if(_0x3ba4f6['occupation']['farming']['crop']=='wheat'){let _0x2b16d1=_0x166ce9['guild']['channels']['cache']['get'](_0x440975['errorLoggingChannel']);_0x2b16d1?_0x2b16d1['send']('<@'+_0x166ce9['user']['id']+'>\x20'+_0x3ba4f6['username']+'\x20does\x20not\x20have\x20any\x20seeds.'):_0x166ce9['message']['channel']['send']('<@'+_0x166ce9['user']['id']+'>\x20'+_0x3ba4f6['username']+'\x20does\x20not\x20have\x20any\x20seeds.');}else{let _0x24d682=_0x582d25;}}console['log']('is\x20here3');let _0x312d6b=_0x3ba4f6['botUser']['blockAt'](_0x3ba4f6['occupation']['farming']['harvest']['cropBlock']['position']['offset'](0x0,-0x1,0x0));try{await _0x3ba4f6['botUser']['placeBlock'](_0x312d6b,new Vec3(0x0,0x1,0x0));}catch(_0x14d1e8){if(!_0x14d1e8['toString']()['includes']('the\x20block\x20is\x20still\x20air'))console['log'](_0x14d1e8);}}_0x3ba4f6['botUser']['setControlState']('forward',!![]),await delay(0xaf),_0x3ba4f6['botUser']['setControlState']('forward',![]),await delay(0x12c),_0x3ba4f6['occupation']['farming']['harvest']['waiting']=!![];}else _0x3ba4f6['botUser']['setControlState']('forward',!![]);}catch(_0x2d330a){console['log'](_0x2d330a);}}}}}async function _0x55e7a3(){console['log']('readyCrop');if(_0x3ba4f6['occupation']['farming']['crop']=='pumpkin'||_0x3ba4f6['occupation']['farming']['crop']=='melon_block')return _0x3ba4f6['botUser']['findBlockSync']({'point':_0x3ba4f6['botUser']['entity']['position'],'matching':_0x144ff4=>{return _0x144ff4['name']==_0x3ba4f6['occupation']['farming']['crop'];},'maxDistance':range,'count':0x1});else{console['log'](_0x3ba4f6['occupation']['farming']['crop']);try{return await _0x3ba4f6['botUser']['findBlockSync']({'point':_0x3ba4f6['botUser']['entity']['position'],'matching':_0xcda91a=>{return _0xcda91a['metadata']==0x7&&_0xcda91a['name']==_0x3ba4f6['occupation']['farming']['crop'];},'maxDistance':range,'count':0x1});}catch(_0x37cd6a){return console['log']('could\x20not\x20find\x20block'),![];}}}async function _0x5680f9(_0x26a52b,_0x7c72b5){const _0x200c47=_0x250bf0(_0x26a52b);if(_0x200c47)try{await _0x3ba4f6['botUser']['equip'](_0x200c47,_0x7c72b5),_0x3ba4f6['botUser']['chat']('/m\x20OHMelin\x20equipped\x20'+_0x26a52b);}catch(_0x2c0f4){_0x3ba4f6['botUser']['chat']('/msg\x20OHMelin\x20cannot\x20equip\x20'+_0x26a52b+':\x20'+_0x2c0f4['message']);}else _0x3ba4f6['botUser']['chat']('/msg\x20OHMelin\x20I\x20have\x20no\x20'+_0x26a52b);}function _0x250bf0(_0x2a4b2b){const _0x141a7e=_0x3ba4f6['botUser']['inventory']['items']();return console['log'](_0x2a4b2b),_0x141a7e['filter'](_0x14432d=>_0x14432d['type']===0x127)[0x0];}let _0x528e25=_0x166ce9['message']['components'][0x1];_0x528e25['components'][0x0]['setDisabled'](!![]),_0x528e25['components'][0x1]['setDisabled'](![]),_0x528e25['components'][0x2]['setDisabled'](!![]);let _0x1fefdd=new _0x1dfb01['MessageEmbed']()['setColor'](_0x440975['embedColor'])['setAuthor']({'name':'Farm\x20using:\x20'+_0x3ba4f6['username'],'iconURL':'http://cravatar.eu/head/'+_0x3ba4f6['username']+'/32.png'})['setDescription']('Select\x20the\x20crop\x20type\x20in\x20the\x20menu\x20beneath\x20and\x20use\x20the\x20buttons\x20to\x20start\x20farming.\x20\x0a\x0a'+('🔸\x20`Deposit\x20Chest`\x0a⤷\x20\x20**Coords:**\x20'+_0x3ba4f6['occupation']['farming']['depositCoords']))['setFooter'](''+_0x166ce9['user']['tag'])['setThumbnail']('https://mc-heads.net/player/'+_0x3ba4f6['username']);_0x166ce9['update']({'embeds':[_0x1fefdd],'components':[_0x166ce9['message']['components'][0x0],_0x528e25]});});}};