const AccountLoading=require('../Functions/AccountLoading.js'),fs=require('fs'),{Vec3}=require('vec3'),delay=_0x382b79=>new Promise(_0x7787ad=>setTimeout(_0x7787ad,_0x382b79));let performanceChecking=![];module['exports']={'name':'farmingStartButton123123123','run':async(_0x38e95a,_0x3d2096,_0x2964f7)=>{fs['readFile']('./Settings.json','utf8',function(_0x1fc5d0,_0x5ed2c5){var _0x2274cc=JSON['parse'](_0x5ed2c5);let _0x42dd9d=AccountLoading['loggedIn'];if(_0x3d2096['user']['tag']!==_0x3d2096['message']['embeds'][0x0]['footer']['text'])return _0x3d2096['reply']({'content':'Please\x20use\x20`.farm`\x20to\x20do\x20this.','ephemeral':!![]});if(!_0x42dd9d['length'])return _0x3d2096['reply']({'content':'No\x20bots\x20are\x20currently\x20loaded.','ephemeral':!![]});let _0x4075d8=0x0,_0x50eb0a;_0x42dd9d['forEach'](_0x1d410a=>{_0x1d410a['selected']&&(_0x4075d8++,_0x50eb0a=_0x1d410a);});if(_0x4075d8==0x0)return _0x3d2096['reply']({'content':'No\x20bot\x20is\x20currently\x20selected!\x20Use\x20`.select`\x20to\x20select\x20an\x20account.','ephemeral':!![]});if(_0x4075d8>0x1)return _0x3d2096['reply']({'content':'Please\x20only\x20select\x20a\x20single\x20bot\x20to\x20do\x20this.','ephemeral':!![]});if(_0x50eb0a['occupation']['currentlyOccupied']['busy']==!![]&&_0x4075d8[0x0]['occupation']['farming']['currentlyFarming']==![])return _0x3d2096['reply']({'content':_0x4075d8[0x0]['username']+'\x20is\x20curretly\x20occupied\x20doing\x20a\x20different\x20task.','ephemeral':!![]});if(_0x50eb0a['occupation']['currentlyOccupied']['busy']==!![]&&_0x4075d8[0x0]['occupation']['farming']['currentlyFarming']==!![])return _0x3d2096['reply']({'content':_0x4075d8[0x0]['username']+'\x20is\x20already\x20farming.','ephemeral':!![]});_0x50eb0a['occupation']['farming']['depositVec']=_0x50eb0a['occupation']['farming']['depositCoords'],_0x50eb0a['occupation']['currentlyOccupied']['busy']=!![],_0x50eb0a['occupation']['farming']['currentlyFarming']=!![],_0x50eb0a['occupation']['currentlyOccupied']['occupation']='farming';const _0x3dcffb=require('minecraft-data')(_0x50eb0a['botUser']['version']);async function _0xdd4b93(){setInterval(async function(){if(!_0x50eb0a['occupation']['farming']['currentlyFarming'])return;if(!_0x50eb0a['occupation']['farming']['depositing']){let _0x5e7e5c=0x0,_0x355730=0x0;_0x50eb0a['botUser']['inventory']['items']()['forEach'](_0x2001ed=>{if(_0x50eb0a['occupation']['farming']['crop']=='wheat'){if(_0x2001ed['type']==0x127)_0x355730+=_0x2001ed['count'];if(_0x2001ed['type']==0x128)_0x5e7e5c+=_0x2001ed['count'];}else{if(_0x50eb0a['occupation']['farming']['crop']=='carrots'){if(_0x2001ed['type']==0x187)_0x5e7e5c+=_0x2001ed['count'];}else{if(_0x50eb0a['occupation']['farming']['crop']=='potatoes'){if(_0x2001ed['type']==0x188)_0x5e7e5c+=_0x2001ed['count'];}else{if(_0x50eb0a['occupation']['farming']['crop']=='pumpkin'){if(_0x2001ed['type']==0x56)_0x5e7e5c+=_0x2001ed['count'];}else{if(_0x50eb0a['occupation']['farming']['crop']=='melon_block'){if(_0x2001ed['type']==0x67)_0x5e7e5c+=_0x2001ed['count'];}}}}}}),_0x50eb0a['occupation']['farming']['seedCount']+=_0x355730-_0x50eb0a['occupation']['farming']['seedCount'],_0x50eb0a['occupation']['farming']['cropCount']+=_0x5e7e5c-_0x50eb0a['occupation']['farming']['cropCount'];}},0x7d0);}_0x4daee0(),_0xdd4b93();async function _0x4daee0(){if(!_0x50eb0a['occupation']['farming']['currentlyFarming']){_0x50eb0a['occupation']['currentlyOccupied']['busy']=![],_0x50eb0a['occupation']['currentlyOccupied']['occupation']='',_0x50eb0a['occupation']['farming']['depositing']=![],_0x50eb0a['botUser']['setControlState']('forward',![]),_0x50eb0a['botUser']['look'](0x0,0x0,![]);return;}if(_0x50eb0a['occupation']['farming']['cropCount']>_0x2274cc['cropsTillDeposit']||_0x50eb0a['botUser']['inventory']['slots']['filter'](_0x5cfd74=>_0x5cfd74==null)['length']-0x8<0x3){if(!_0x50eb0a['occupation']['farming']['depositing'])await _0x2311f4();}else await _0x36582b();setTimeout(_0x4daee0,0x96);}async function _0x2311f4(){if(typeof _0x50eb0a['occupation']['farming']['depositVec']==='string'||_0x50eb0a['occupation']['farming']['depositVec']instanceof String){if(_0x50eb0a['occupation']['farming']['depositCoords']['toLowerCase']()=='auto'){let _0x13fd10=_0x50eb0a['botUser']['findBlock']({'matching':[mcdata['blocksByName']['trapped_chest']['id'],mcdata['blocksByName']['chest']['id']],'maxDistance':0x40});if(!_0x13fd10)return _0x50eb0a['occupation']['currentlyOccupied']['busy']=![],_0x50eb0a['occupation']['farming']['currentlyFarming']=![],_0x50eb0a['occupation']['currentlyOccupied']['occupation']='',_0x3d2096['message']['channel']['send']('<@'+_0x3d2096['user']['id']+'>\x20No\x20deposit\x20chest\x20found\x20by:\x20'+_0x50eb0a['username']+'.\x20Bot\x20was\x20stopped.');_0x50eb0a['occupation']['farming']['depositVec']=_0x13fd10['position'];}else _0x50eb0a['occupation']['farming']['depositVec']=new Vec3(parseInt(_0x50eb0a['occupation']['farming']['depositCoords']['split'](',\x20')[0x0]),parseInt(_0x50eb0a['occupation']['farming']['depositCoords']['split'](',\x20')[0x1]),parseInt(_0x50eb0a['occupation']['farming']['depositCoords']['split'](',\x20')[0x2]));}if(!_0x50eb0a['occupation']['farming']['depositing']){_0x50eb0a['occupation']['farming']['depositVec']['y']-0.2>_0x50eb0a['botUser']['entity']['position']['y']?_0x50eb0a['botUser']['setControlState']('jump',!![]):_0x50eb0a['botUser']['getControlState']('jump')&&_0x50eb0a['botUser']['setControlState']('jump',![]);performanceChecking&&(_0x50eb0a['occupation']['farming']['position']!=Math['floor'](_0x50eb0a['botUser']['entity']['position']['x'])['toString']()+'\x20'+Math['floor'](_0x50eb0a['botUser']['entity']['position']['z'])['toString']()?(_0x50eb0a['occupation']['farming']['position']=Math['floor'](_0x50eb0a['botUser']['entity']['position']['x'])['toString']()+'\x20'+Math['floor'](_0x50eb0a['botUser']['entity']['position']['z'])['toString'](),_0x50eb0a['occupation']['farming']['samePosition']=0x0,_0x50eb0a['botUser']['getControlState']('jump')&&_0x50eb0a['botUser']['setControlState']('jump',![])):_0x50eb0a['occupation']['farming']['samePosition']>=0xa?(_0x50eb0a['botUser']['setControlState']('jump',!![]),_0x50eb0a['botUser']['setControlState']('forward',!![])):_0x50eb0a['occupation']['farming']['samePosition']++);if(_0x50eb0a['botUser']['entity']['position']['distanceTo'](_0x50eb0a['occupation']['farming']['depositVec'])<0x2){_0x50eb0a['botUser']['setControlState']('forward',![]);let _0x47a099=_0x50eb0a['botUser']['blockAt'](_0x50eb0a['occupation']['farming']['depositVec']),_0x38b761;try{_0x38b761=await _0x50eb0a['botUser']['openContainer'](_0x47a099),_0x50eb0a['occupation']['farming']['depositing']=!![];}catch(_0x1e16c7){let _0x5d8e27=_0x1e16c7;}for(slot of _0x50eb0a['botUser']['inventory']['slots']){let _0x33ad5c=['wheat','carrot','potato','pumpkin','melon'];if(slot&&_0x33ad5c['includes'](slot['name']))try{await _0x38b761['deposit'](slot['type'],null,slot['count'],_0x52edfe=>{if(_0x52edfe){if(_0x52edfe['toString']()['toLowerCase']()['includes']('destination\x20full')){_0x50eb0a['occupation']['farming']['currentlyFarming']=![];let _0x593eb8=_0x3d2096['guild']['channels']['cache']['get'](_0x2274cc['errorLoggingChannel']);_0x593eb8?_0x593eb8['send']('<@'+_0x3d2096['user']['id']+'>\x20'+_0x50eb0a['username']+'\x27s\x20despoit\x20chest\x20is\x20full.\x20Bot\x20has\x20been\x20stopped.'):_0x3d2096['message']['channel']['send']('<@'+_0x3d2096['user']['id']+'>\x20'+_0x50eb0a['username']+'\x27s\x20despoit\x20chest\x20is\x20full.\x20Bot\x20has\x20been\x20stopped.');_0x38b761['close']();return;}}});}catch(_0x2f4184){let _0x113c6d=_0x2f4184;}}_0x50eb0a['occupation']['farming']['cropCount']=0x0;if(_0x50eb0a['occupation']['farming']['crop']=='carrots')await _0x38b761['withdraw'](0x187,null,0x3);if(_0x50eb0a['occupation']['farming']['crop']=='potatoes')await _0x38b761['withdraw'](0x188,null,0x3);await _0x38b761['close'](),_0x50eb0a['occupation']['farming']['depositing']=![];}else _0x50eb0a['botUser']['lookAt'](_0x50eb0a['occupation']['farming']['depositVec']),_0x50eb0a['botUser']['setControlState']('forward',!![]);}}async function _0x36582b(){let _0x23cf15=_0x95326a();if(_0x23cf15){_0x50eb0a['botUser']['lookAt'](_0x23cf15['position']);_0x23cf15['position']['y']-0.2>_0x50eb0a['botUser']['entity']['position']['y']?_0x50eb0a['botUser']['setControlState']('jump',!![]):_0x50eb0a['botUser']['getControlState']('jump')&&_0x50eb0a['botUser']['setControlState']('jump',![]);performanceChecking&&(_0x50eb0a['occupation']['farming']['position']!=Math['floor'](_0x50eb0a['botUser']['entity']['position']['x'])['toString']()+'\x20'+Math['floor'](_0x50eb0a['botUser']['entity']['position']['z'])['toString']()?(_0x50eb0a['occupation']['farming']['position']=Math['floor'](_0x50eb0a['botUser']['entity']['position']['x'])['toString']()+'\x20'+Math['floor'](_0x50eb0a['botUser']['entity']['position']['z'])['toString'](),_0x50eb0a['occupation']['farming']['samePosition']=0x0,_0x50eb0a['botUser']['getControlState']('jump')&&_0x50eb0a['botUser']['setControlState']('jump',![])):_0x50eb0a['occupation']['farming']['samePosition']>=0xa?(_0x50eb0a['botUser']['setControlState']('jump',!![]),_0x50eb0a['botUser']['setControlState']('forward',!![])):_0x50eb0a['occupation']['farming']['samePosition']++);try{let _0x314065=_0x50eb0a['botUser']['entity']['position']['distanceTo'](_0x23cf15['position'])<0.5;if(_0x50eb0a['occupation']['farming']['crop']=='pumpkin'||_0x50eb0a['occupation']['farming']['crop']=='melon_block')_0x314065=_0x50eb0a['botUser']['entity']['position']['distanceTo'](_0x23cf15['position'])<0x2;if(_0x314065){_0x50eb0a['botUser']['setControlState']('forward',![]);try{await _0x50eb0a['botUser']['dig'](_0x23cf15);}catch(_0x1ee730){let _0x28e93c=_0x1ee730;}if(_0x50eb0a['occupation']['farming']['crop']!='pumpkin'&&_0x50eb0a['occupation']['farming']['crop']!='melon_block'){if(!_0x50eb0a['botUser']['heldItem']||_0x50eb0a['botUser']['heldItem']['name']!=_0x50eb0a['occupation']['farming']['cropSeed'])try{await _0x50eb0a['botUser']['equip'](_0x3dcffb['itemsByName'][_0x50eb0a['occupation']['farming']['cropSeed']]['id']);}catch(_0x3a7489){if(_0x50eb0a['occupation']['farming']['crop']=='wheat'){let _0x2237ba=_0x3d2096['guild']['channels']['cache']['get'](_0x2274cc['errorLoggingChannel']);_0x2237ba?_0x2237ba['send']('<@'+_0x3d2096['user']['id']+'>\x20'+_0x50eb0a['username']+'\x20does\x20not\x20have\x20any\x20seeds.'):_0x3d2096['message']['channel']['send']('<@'+_0x3d2096['user']['id']+'>\x20'+_0x50eb0a['username']+'\x20does\x20not\x20have\x20any\x20seeds.');}else{let _0x211393=_0x3a7489;}}let _0x32b2d2=_0x50eb0a['botUser']['blockAt'](_0x23cf15['position']['offset'](0x0,-0x1,0x0));try{await _0x50eb0a['botUser']['placeBlock'](_0x32b2d2,new Vec3(0x0,0x1,0x0));}catch(_0x1538b0){let _0x466e67=_0x1538b0;}}_0x50eb0a['botUser']['setControlState']('forward',!![]),await delay(0xaf),_0x50eb0a['botUser']['setControlState']('forward',![]),await delay(0x12c);}else _0x50eb0a['botUser']['setControlState']('forward',!![]);}catch(_0xe1e823){}}}function _0x95326a(){return _0x50eb0a['occupation']['farming']['crop']=='pumpkin'||_0x50eb0a['occupation']['farming']['crop']=='melon_block'?_0x50eb0a['botUser']['findBlock']({'maxDistance':0x40,'matching':_0x86ad20=>{return _0x86ad20['name']==_0x50eb0a['occupation']['farming']['crop'];}}):_0x50eb0a['botUser']['findBlock']({'maxDistance':0x40,'matching':_0x1fa4ea=>{return _0x1fa4ea['name']==_0x50eb0a['occupation']['farming']['crop']&&_0x1fa4ea['metadata']==0x7;}});}const _0x282f1e=new _0x2964f7['MessageActionRow']()['addComponents'](new _0x2964f7['MessageSelectMenu']()['setCustomId']('ChooseCrop-Menu')['setPlaceholder']('Select\x20the\x20crop\x20you\x20wish\x20to\x20farm.')['addOptions']([{'label':'Wheat','value':'wheat','description':'Farm\x20Wheat','emoji':'🌾'},{'label':'Carrots','value':'carrots','description':'Farm\x20Carrots','emoji':'🥕'},{'label':'Potato','value':'potato','description':'Farm\x20Potatoes','emoji':'🥔'},{'label':'Pumpkin','value':'pumpkin','description':'Farm\x20Pumpkins','emoji':'🎃'},{'label':'Melon','value':'melon','description':'Farm\x20Melons','emoji':'🍉'}])),_0x1822a6=new _0x2964f7['MessageActionRow']()['addComponents'](new _0x2964f7['MessageButton']()['setCustomId']('farmingStartButton')['setLabel']('Start\x20Farming')['setStyle']('SUCCESS')['setDisabled'](!![]))['addComponents'](new _0x2964f7['MessageButton']()['setCustomId']('farmingStopButton')['setLabel']('Stop\x20Farming')['setStyle']('DANGER')['setDisabled'](![]))['addComponents'](new _0x2964f7['MessageButton']()['setCustomId']('farmingDepositChestButton')['setLabel']('Set\x20Deposit\x20Chest')['setStyle']('PRIMARY')['setDisabled'](!![]));let _0x158841=new _0x2964f7['MessageEmbed']()['setColor'](_0x2274cc['embedColor'])['setAuthor']({'name':'Farm\x20using:\x20'+_0x50eb0a['username'],'iconURL':'http://cravatar.eu/head/'+_0x50eb0a['username']+'/32.png'})['setDescription']('Select\x20the\x20crop\x20type\x20in\x20the\x20menu\x20beneath\x20and\x20use\x20the\x20buttons\x20to\x20start\x20farming.\x20\x0a\x0a'+('Currently\x20Farming:\x20`'+_0x50eb0a['occupation']['farming']['currentlyFarming']+'`\x0a')+('Current\x20Crop:\x20`'+_0x50eb0a['occupation']['farming']['crop']+'`\x0a')+('Deposit\x20Chest\x20Coords:\x20`'+_0x50eb0a['occupation']['farming']['depositCoords']+'`\x0a'))['setFooter'](''+_0x3d2096['user']['tag'])['setThumbnail']('https://mc-heads.net/player/'+_0x50eb0a['username']);_0x3d2096['update']({'embeds':[_0x158841],'components':[_0x282f1e,_0x1822a6]});});}};